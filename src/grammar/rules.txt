PROGRAMME : DIRECTIVE_PRAGMA* DEFINITION_CONTRAT EOF;

DIRECTIVE_PRAGMA : PRAGMA_TOKEN CASHSCRIPT_TOKEN VALEUR_PRAGMA POINT_VIRGULE_TOKEN;

VALEUR_PRAGMA : CONTRAINTE_VERSION [CONTRAINTE_VERSION | eps];

CONTRAINTE_VERSION : [OPERATEUR_VERSION | eps] VERSION_LITTERALE_TOKEN;

OPERATEUR_VERSION : OPERATEUR_BINAIRE_XOR_TOKEN | OPERATEUR_BINAIRE_NON_TOKEN | OPERATEUR_SUPEG_TOKEN | OPERATEUR_SUP_TOKEN | OPERATEUR_INF_TOKEN | OPERATEUR_INFEG_TOKEN | OPERATEUR_EG_TOKEN;

DEFINITION_CONTRAT : CONTRAT_TOKEN IDENTIFIANT_TOKEN LISTE_PARAMETRE ACCOLADE_O_TOKEN {DEFINITION_FONCTION} ACCOLADE_F_TOKEN;

DEFINITION_FONCTION : FONCTION_TOKEN IDENTIFIANT_TOKEN LISTE_PARAMETRE ACCOLADE_O_TOKEN {DECLARATION} ACCOLADE_F_TOKEN;

LISTE_PARAMETRE : PARENTHESE_O_TOKEN [(PARAMETRE (VIRGULE_TOKEN PARAMETRE)* [VIRGULE_TOKEN | eps])| eps] PARENTHESE_F_TOKEN;

PARAMETRE : NOM_TYPE IDENTIFIANT_TOKEN;

BLOC : ACCOLADE_O_TOKEN DECLARATION* ACCOLADE_F_TOKEN | DECLARATION;

DECLARATION : DEFINITION_VARIABLE| AFFECTATION| TEMPS_DECLARATION| requireStatement| SI | WHILE | ECRIRE | LIRE;

DEFINITION_VARIABLE : NOM_TYPE IDENTIFIANT_TOKEN OPERATEUR_EG_TOKEN EXPRESSION POINT_VIRGULE_TOKEN;

AFFECTATION : IDENTIFIANT_TOKEN OPERATEUR_EG_TOKEN EXPRESSION POINT_VIRGULE_TOKEN;

TEMPS_DECLARATION : REQUIRE_TOKEN PARENTHESE_O_TOKEN TX_VAR_TOKEN OPERATEUR_SUPEG_TOKEN EXPRESSION PARENTHESE_F_TOKEN POINT_VIRGULE_TOKEN;

requireStatement : REQUIRE_TOKEN PARENTHESE_O_TOKEN EXPRESSION PARENTHESE_F_TOKEN POINT_VIRGULE_TOKEN;

SI : SI_TOKEN PARENTHESE_O_TOKEN EXPRESSION PARENTHESE_F_TOKEN BLOC [(SINON_TOKEN BLOC)| eps];

FONCTION : IDENTIFIANT_TOKEN LISTE_EXPRESSIONS 

LISTE_EXPRESSIONS : PARENTHESE_O_TOKEN [(EXPRESSION (VIRGULE_TOKEN EXPRESSION)* [VIRGULE_TOKEN| eps])| eps] PARENTHESE_F_TOKEN;

EXPRESSION : PARENTHESE_O_TOKEN EXPRESSION PARENTHESE_F_TOKEN 
    | NOM_TYPE PARENTHESE_O_TOKEN EXPRESSION [(VIRGULE_TOKEN EXPRESSION)| eps] [VIRGULE_TOKEN| eps] PARENTHESE_F_TOKEN 
    | FONCTION 
    | NOUVEAU_TOKEN IDENTIFIANT_TOKEN LISTE_EXPRESSIONS 
    | EXPRESSION CROCHET_O_TOKEN NOMBRE_LITTERAL_TOKEN CROCHET_F_TOKEN 
    | EXPRESSION (INVERSER_TOKEN | TAILLE_TOKEN) 
    | (OPERATEUR_NON_TOKEN | OPERATEUR_MOINS_TOKEN) EXPRESSION 
    | EXPRESSION SPLIT_TOKEN PARENTHESE_O_TOKEN EXPRESSION PARENTHESE_F_TOKEN 
    | EXPRESSION ( OPERATEUR_FOIS_TOKEN | OPERATEUR_DIVISER_TOKEN | OPERATEUR_MODULO_TOKEN) EXPRESSION 
    | EXPRESSION (OPERATEUR_PLUS_TOKEN | OPERATEUR_MOINS_TOKEN) EXPRESSION 
    | EXPRESSION (OPERATEUR_INF_TOKEN | OPERATEUR_INFEG_TOKEN | OPERATEUR_SUP_TOKEN | OPERATEUR_SUPEG_TOKEN) EXPRESSION 
    | EXPRESSION (OPERATEUR_EGAL_TOKEN | OPERATEUR_DIFFERENT_TOKEN) EXPRESSION 
    | EXPRESSION OPERATEUR_BINAIRE_ET_TOKEN EXPRESSION 
    | EXPRESSION OPERATEUR_BINAIRE_XOR_TOKEN EXPRESSION 
    | EXPRESSION OPERATEUR_BINAIRE_OU_TOKEN EXPRESSION 
    | EXPRESSION OPERATEUR_ET_TOKEN EXPRESSION 
    | EXPRESSION OPERATEUR_OU_TOKEN EXPRESSION 
    | CROCHET_O_TOKEN [(EXPRESSION (VIRGULE_TOKEN EXPRESSION)* [VIRGULE_TOKEN | eps])| eps] CROCHET_F_TOKEN 
    | CHAMP_AVANT_IMAGE_TOKEN 
    | IDENTIFIANT_TOKEN 
    | LITTERAL 

LITTERAL : BOOLEAN_LITTERAL_TOKEN
    | NOMBRE_LITTERAL
    | STRING_LITTERAL_TOKEN
    | DATE_LITTERAL
    | HEX_LITTERAL_TOKEN;

NOMBRE_LITTERAL : NOMBRE_LITTERAL_TOKEN [UNITE_TOKEN| eps];

NOM_TYPE : TYPE_ENTIER_TOKEN | TYPE_BOOLEAN_TOKEN | TYPE_STRING_TOKEN | TYPE_CLE_PUBLIQUE_TOKEN | TYPE_SIGNATURE_TOKEN | TYPE_SIGNATURE_DONNEE_TOKEN | BYTES;

BYTES : BYTES_TOKEN [[[1-9] [0-9]*] | eps];

DATE_LITTERAL : 'date(' STRING_LITTERAL_TOKEN PARENTHESE_F_TOKEN;

////////////
WHILE : WHILE_TOKEN PARENTHESE_O_TOKEN EXPRESSION PARENTHESE_F_TOKEN BLOC ;
ECRIRE : ECRIRE_TOKEN PARENTHESE_O_TOKEN EXPRESSION PARENTHESE_F_TOKEN POINT_VIRGULE_TOKEN ;
LIRE : LIRE_TOKEN  IDENTIFIANT_TOKEN PARENTHESE_F_TOKEN POINT_VIRGULE_TOKEN ;
////////////
COMMENT : CO_TOKEN .* CF_TOKEN ;

LINE_COMMENT : COMMENTAIRE_LIGNE_TOKEN ~[\r\n]* ;

